<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seguridad y Salud en el Trabajo - INFIBAGUÉ</title>
    <!-- Estilos Globales -->
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/induccion.css">
    <!-- Iconos -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- Google Fonts -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            corePlugins: {
                preflight: false,
            }
        }
    </script>
    <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@18.2.0",
        "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
        "lucide-react": "https://esm.sh/lucide-react@0.300.0"
      }
    }
    </script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">
    <!-- Supabase SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <style>
        /* Estilos Base SST - Mejorados */
        body {
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 50%, #bbf7d0 100%);
            background-attachment: fixed;
            font-family: 'Poppins', sans-serif;
            /* CLAVE */
            margin: 0;
            overflow-x: hidden;
            overflow-y: auto;
            position: relative;
        }

        /* Animated background pattern */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image:
                radial-gradient(circle at 20% 30%, rgba(34, 197, 94, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(22, 163, 74, 0.06) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(16, 185, 129, 0.05) 0%, transparent 40%);
            animation: bgFloat 20s ease-in-out infinite;
            pointer-events: none;
            z-index: 0;
        }

        /* Background Image - AtenCi */
        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('../assets/atenci.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            opacity: 0.15;
            z-index: 0;
            pointer-events: none;
            mix-blend-mode: multiply;
        }

        @keyframes bgFloat {

            0%,
            100% {
                transform: translate(0, 0) scale(1);
            }

            50% {
                transform: translate(20px, -20px) scale(1.05);
            }
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            /* CLAVE */
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            position: relative;
            z-index: 1;
        }

        /* Header Style - Glassmorphism */
        .module-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 25px;
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(20px) saturate(180%);
            border-radius: 20px;
            box-shadow:
                0 8px 32px rgba(22, 163, 74, 0.1),
                0 2px 8px rgba(0, 0, 0, 0.05),
                inset 0 1px 0 rgba(255, 255, 255, 0.8);
            margin-bottom: 20px;
            z-index: 10;
            border: 1px solid rgba(255, 255, 255, 0.5);
            transition: all 0.3s ease;
        }

        .module-header:hover {
            box-shadow:
                0 12px 40px rgba(22, 163, 74, 0.15),
                0 4px 12px rgba(0, 0, 0, 0.08);
        }

        .progress-indicator {
            display: flex;
            gap: 8px;
            padding: 5px;
        }

        .dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: linear-gradient(135deg, #e2e8f0 0%, #cbd5e1 100%);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            position: relative;
        }

        .dot.active {
            background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
            transform: scale(1.4);
            box-shadow:
                0 4px 12px rgba(34, 197, 94, 0.4),
                0 0 20px rgba(34, 197, 94, 0.2);
        }

        .dot.active::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: inherit;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                transform: scale(1);
                opacity: 1;
            }

            50% {
                transform: scale(1.5);
                opacity: 0;
            }
        }

        /* Slides Common */
        .slide {
            display: none;
            flex: 1;
            flex-direction: column;
            animation: slideIn 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            overflow-y: auto;
            padding-right: 10px;
        }

        .slide.active {
            display: flex;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(30px) scale(0.98);
            }

            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .slide-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, #166534 0%, #16a34a 50%, #22c55e 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 15px;
            text-align: center;
            font-weight: 800;
            letter-spacing: -0.5px;
            text-shadow: 0 2px 10px rgba(22, 163, 74, 0.1);
            position: relative;
            padding-bottom: 10px;
        }

        .slide-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: linear-gradient(90deg, transparent, #22c55e, transparent);
            border-radius: 2px;
        }

        .slide-description {
            text-align: center;
            color: #64748b;
            max-width: 700px;
            margin: 0 auto 30px auto;
            font-size: 1.1rem;
            line-height: 1.6;
            font-weight: 500;
        }

        /* --- SLIDE 5: Políticas (Interactive Tabs) --- */
        .policies-wrapper {
            display: flex;
            gap: 25px;
            height: 420px;
        }

        .policy-tabs {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .policy-tab {
            padding: 18px 22px;
            background: linear-gradient(135deg, #ffffff 0%, #fafafa 100%);
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border-left: 4px solid #e2e8f0;
            box-shadow:
                0 2px 8px rgba(0, 0, 0, 0.04),
                0 1px 2px rgba(0, 0, 0, 0.06);
            display: flex;
            align-items: center;
            gap: 15px;
            position: relative;
            overflow: hidden;
        }

        .policy-tab::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 4px;
            background: linear-gradient(180deg, #22c55e, #16a34a);
            transform: scaleY(0);
            transition: transform 0.4s ease;
        }

        .policy-tab:hover {
            transform: translateX(8px) scale(1.02);
            box-shadow:
                0 8px 20px rgba(22, 163, 74, 0.12),
                0 2px 6px rgba(0, 0, 0, 0.08);
        }

        .policy-tab:hover::before {
            transform: scaleY(1);
        }

        .policy-tab.active {
            background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
            border-left-color: #16a34a;
            box-shadow:
                0 12px 24px rgba(22, 163, 74, 0.15),
                0 4px 8px rgba(22, 163, 74, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.5);
            transform: translateX(8px);
        }

        .policy-tab.active::before {
            transform: scaleY(1);
        }

        .tab-icon {
            font-size: 1.8rem;
            color: #16a34a;
            transition: all 0.3s ease;
            filter: drop-shadow(0 2px 4px rgba(22, 163, 74, 0.2));
        }

        .policy-tab:hover .tab-icon {
            transform: scale(1.15) rotate(5deg);
        }

        .policy-tab.active .tab-icon {
            transform: scale(1.2);
            filter: drop-shadow(0 4px 8px rgba(22, 163, 74, 0.3));
        }

        .policy-content-area {
            flex: 2;
            background: linear-gradient(135deg, #ffffff 0%, #fafafa 100%);
            border-radius: 24px;
            padding: 35px;
            box-shadow:
                0 20px 40px rgba(0, 0, 0, 0.08),
                0 8px 16px rgba(0, 0, 0, 0.04),
                inset 0 1px 0 rgba(255, 255, 255, 0.8);
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.5);
        }

        .policy-content-area::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(34, 197, 94, 0.03) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }

        @keyframes rotate {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(360deg);
            }
        }

        .policy-pane {
            display: none;
            height: 100%;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            animation: fadeSlideIn 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            z-index: 1;
        }

        .policy-pane.active {
            display: flex;
        }

        .policy-img {
            max-width: 150px;
            margin-bottom: 20px;
        }

        .policy-list {
            text-align: left;
            margin-top: 20px;
            list-style: none;
            padding: 0;
            width: 100%;
        }

        .policy-list li {
            margin-bottom: 14px;
            padding-left: 30px;
            position: relative;
            color: #475569;
            font-size: 0.95rem;
            line-height: 1.6;
            transition: all 0.2s ease;
        }

        .policy-list li:hover {
            color: #1e293b;
            transform: translateX(4px);
        }

        .policy-list li::before {
            content: '✓';
            color: #22c55e;
            position: absolute;
            left: 0;
            font-weight: bold;
            font-size: 1.2rem;
            background: linear-gradient(135deg, #22c55e, #16a34a);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            filter: drop-shadow(0 2px 4px rgba(34, 197, 94, 0.2));
        }

        @keyframes fadeSlideIn {
            from {
                opacity: 0;
                transform: translateX(30px) scale(0.95);
            }

            to {
                opacity: 1;
                transform: translateX(0) scale(1);
            }
        }

        /* --- SLIDE 6: Peligro vs Riesgo (Interactive Scenario) --- */
        .risk-scenario {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .equation-area {
            display: flex;
            align-items: center;
            gap: 20px;
            margin: 30px 0;
            font-size: 1.5rem;
            font-weight: bold;
            color: #374151;
            flex-wrap: wrap;
            justify-content: center;
        }

        .equation-item {
            background: #f3f4f6;
            padding: 15px 30px;
            border-radius: 12px;
            border: 2px dashed #9ca3af;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .equation-item:hover {
            border-color: #f59e0b;
            background: #fffbeb;
            transform: scale(1.05);
        }

        .equation-item.revealed {
            background: #dbeafe;
            border-color: #2563eb;
            color: #1e40af;
            border-style: solid;
        }

        .plus-sign,
        .equal-sign {
            color: #f59e0b;
            font-size: 2rem;
        }

        .visual-demo {
            height: 200px;
            width: 100%;
            background: #e5e7eb;
            border-radius: 15px;
            margin-top: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
        }

        .demo-msg {
            font-size: 1.2rem;
            color: #6b7280;
        }

        /* Animations for demo */
        .anim-stairs {
            font-size: 5rem;
            position: absolute;
            left: 20%;
            bottom: 20px;
        }

        .anim-runner {
            font-size: 3rem;
            position: absolute;
            left: 25%;
            bottom: 100px;
            transition: all 1s;
        }

        .anim-fall {
            transform: rotate(90deg) translate(50px, 50px);
            color: red;
        }

        /* --- SLIDE 7: Matriz IPEVR (Grid Scanner) --- */
        .matrix-container {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 35px;
            background: linear-gradient(135deg, #ffffff 0%, #fafafa 100%);
            border-radius: 24px;
            padding: 35px;
            box-shadow:
                0 20px 40px rgba(0, 0, 0, 0.08),
                0 8px 16px rgba(0, 0, 0, 0.04);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }

        .matrix-info {
            padding-right: 25px;
            border-right: 2px solid rgba(22, 163, 74, 0.1);
        }

        .matrix-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 18px;
        }

        .matrix-cell {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            padding: 24px;
            border-radius: 16px;
            text-align: center;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            border: 2px solid #e2e8f0;
            position: relative;
            overflow: hidden;
        }

        .matrix-cell::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(22, 163, 74, 0.05));
            transform: translateY(100%);
            transition: transform 0.4s ease;
        }

        .matrix-cell:hover {
            background: linear-gradient(135deg, #16a34a 0%, #15803d 100%);
            color: white;
            transform: translateY(-8px) scale(1.03);
            box-shadow:
                0 20px 40px rgba(22, 163, 74, 0.25),
                0 8px 16px rgba(22, 163, 74, 0.15);
            border-color: #16a34a;
        }

        .matrix-cell:hover::before {
            transform: translateY(0);
        }

        .matrix-cell i {
            font-size: 2.5rem;
            margin-bottom: 12px;
            color: #16a34a;
            transition: all 0.3s ease;
            filter: drop-shadow(0 2px 4px rgba(22, 163, 74, 0.2));
        }

        .matrix-cell:hover i {
            color: white;
            transform: scale(1.15) rotate(-5deg);
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.2));
        }

        .matrix-desc {
            font-size: 0.9rem;
            display: none;
            margin-top: 12px;
            line-height: 1.5;
        }

        .matrix-cell:hover .matrix-desc {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        /* Navigation Buttons */
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: auto;
            padding-top: 25px;
            gap: 15px;
        }

        .btn-nav {
            padding: 14px 30px;
            border: none;
            border-radius: 50px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow:
                0 4px 12px rgba(0, 0, 0, 0.1),
                0 2px 4px rgba(0, 0, 0, 0.06);
            position: relative;
            overflow: hidden;
        }

        .btn-nav::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn-nav:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn-prev {
            background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
            color: #475569;
        }

        .btn-next {
            background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
            color: white;
            box-shadow:
                0 6px 16px rgba(34, 197, 94, 0.3),
                0 2px 6px rgba(34, 197, 94, 0.2);
        }

        .btn-prev:hover {
            background: linear-gradient(135deg, #e2e8f0 0%, #cbd5e1 100%);
            transform: translateX(-5px);
            box-shadow:
                0 6px 16px rgba(0, 0, 0, 0.12),
                0 2px 6px rgba(0, 0, 0, 0.08);
        }

        .btn-next:hover {
            background: linear-gradient(135deg, #16a34a 0%, #15803d 100%);
            transform: translateX(5px);
            box-shadow:
                0 8px 20px rgba(34, 197, 94, 0.4),
                0 4px 8px rgba(34, 197, 94, 0.25);
        }

        .btn-nav:active {
            transform: scale(0.98);
        }

        /* =====================================================
           EVALUACIÓN - QUIZ STYLES (Slides 13-17)
           Glassmorphism + SST Green Design System
           ===================================================== */

        /* --- QUIZ CONTAINER & CARDS --- */
        .quiz-container {
            max-width: 750px;
            margin: 0 auto;
            position: relative;
        }

        .quiz-card {
            display: none;
            background: rgba(255, 255, 255, 0.92);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 40px;
            box-shadow:
                0 20px 60px rgba(0, 0, 0, 0.08),
                0 8px 24px rgba(0, 0, 0, 0.04),
                inset 0 1px 0 rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.6);
            animation: quizCardIn 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .quiz-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, #22c55e, #16a34a, #15803d);
            border-radius: 24px 24px 0 0;
        }

        .quiz-card.active {
            display: block;
        }

        @keyframes quizCardIn {
            from {
                opacity: 0;
                transform: translateY(30px) scale(0.96);
            }

            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        /* --- QUIZ QUESTION TEXT --- */
        .quiz-question {
            font-size: 1.25rem;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 30px;
            line-height: 1.6;
            padding-left: 20px;
            border-left: 4px solid #22c55e;
            position: relative;
        }

        .quiz-question::after {
            content: '❓';
            position: absolute;
            top: -5px;
            right: 0;
            font-size: 1.5rem;
            opacity: 0.15;
        }

        /* --- V/F OPTIONS (Row Layout) --- */
        .quiz-options-row {
            display: flex;
            gap: 20px;
            justify-content: center;
        }

        .quiz-options-row .btn-quiz-option {
            flex: 1;
            max-width: 220px;
        }

        /* --- MULTIPLE CHOICE OPTIONS (Column Layout) --- */
        .quiz-options-col {
            display: flex;
            flex-direction: column;
            gap: 14px;
        }

        /* --- QUIZ OPTION BUTTONS (Shared) --- */
        .btn-quiz-option {
            padding: 18px 28px;
            border: 3px solid #e2e8f0;
            border-radius: 16px;
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            color: #334155;
            transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            text-align: left;
        }

        .btn-quiz-option::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(180deg, #22c55e, #16a34a);
            transform: scaleY(0);
            transition: transform 0.3s ease;
            border-radius: 0 4px 4px 0;
        }

        .btn-quiz-option:hover::before {
            transform: scaleY(1);
        }

        .btn-quiz-option:hover {
            border-color: #22c55e;
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
            transform: translateX(8px);
            box-shadow:
                0 8px 24px rgba(34, 197, 94, 0.15),
                0 4px 8px rgba(34, 197, 94, 0.08);
        }

        .btn-quiz-option:active {
            transform: translateX(8px) scale(0.98);
        }

        /* True/False specific */
        .btn-quiz-option.true {
            text-align: center;
        }

        .btn-quiz-option.true:hover {
            background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
            border-color: #16a34a;
        }

        .btn-quiz-option.false {
            text-align: center;
        }

        .btn-quiz-option.false:hover {
            background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
            border-color: #ef4444;
        }

        /* Correct/Incorrect states - applied via JS */
        .btn-quiz-option:disabled {
            cursor: not-allowed;
            opacity: 0.75;
            transform: none !important;
        }

        @keyframes correctPulse {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.03);
            }
        }

        @keyframes shake {

            0%,
            100% {
                transform: translateX(0);
            }

            20% {
                transform: translateX(-8px);
            }

            40% {
                transform: translateX(8px);
            }

            60% {
                transform: translateX(-6px);
            }

            80% {
                transform: translateX(6px);
            }
        }

        /* =====================================================
           MATCHING GAME (Slide 15)
           ===================================================== */
        .match-game-container {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(16px);
            border-radius: 24px;
            padding: 35px;
            box-shadow:
                0 20px 60px rgba(0, 0, 0, 0.08),
                0 8px 24px rgba(0, 0, 0, 0.04);
            border: 1px solid rgba(255, 255, 255, 0.6);
        }

        #match-area {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 18px;
            margin-top: 15px;
        }

        .match-card {
            background: linear-gradient(135deg, #ffffff 0%, #f0fdf4 100%);
            border: 3px solid #e2e8f0;
            border-radius: 18px;
            padding: 24px 16px;
            text-align: center;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .match-card::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.05), rgba(22, 163, 74, 0.02));
            opacity: 0;
            transition: opacity 0.3s;
        }

        .match-card:hover {
            border-color: #22c55e;
            transform: translateY(-6px) scale(1.04);
            box-shadow:
                0 16px 40px rgba(34, 197, 94, 0.2),
                0 6px 12px rgba(34, 197, 94, 0.1);
        }

        .match-card:hover::after {
            opacity: 1;
        }

        .match-card.matched {
            background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%) !important;
            border-color: #22c55e !important;
            pointer-events: none;
            animation: matchSuccess 0.6s ease;
        }

        @keyframes matchSuccess {
            0% {
                transform: scale(1);
            }

            30% {
                transform: scale(1.15) rotate(3deg);
            }

            60% {
                transform: scale(0.95) rotate(-2deg);
            }

            100% {
                transform: scale(1) rotate(0);
            }
        }

        /* =====================================================
           RISK SELECTOR (Slide 16)
           ===================================================== */
        .risk-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 14px;
            justify-content: center;
            padding: 20px 0;
        }

        .risk-tag {
            padding: 16px 28px;
            background: linear-gradient(135deg, #ffffff 0%, #f1f5f9 100%);
            border: 3px solid #e2e8f0;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.95rem;
            color: #475569;
            transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
            user-select: none;
            position: relative;
            overflow: hidden;
        }

        .risk-tag::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.15), rgba(22, 163, 74, 0.08));
            transform: translate(-50%, -50%);
            transition: width 0.5s, height 0.5s;
        }

        .risk-tag:hover {
            border-color: #22c55e;
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(34, 197, 94, 0.15);
        }

        .risk-tag:hover::before {
            width: 300px;
            height: 300px;
        }

        .risk-tag.selected {
            background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
            color: white;
            border-color: #15803d;
            transform: translateY(-3px) scale(1.05);
            box-shadow:
                0 10px 30px rgba(34, 197, 94, 0.3),
                0 4px 10px rgba(34, 197, 94, 0.2);
        }

        /* =====================================================
           RESULTS CARD (Slide 17)
           ===================================================== */
        .results-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(24px);
            border-radius: 32px;
            padding: 50px 40px;
            text-align: center;
            box-shadow:
                0 30px 80px rgba(0, 0, 0, 0.1),
                0 10px 30px rgba(0, 0, 0, 0.05),
                inset 0 1px 0 rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.6);
            max-width: 600px;
            margin: 0 auto;
            position: relative;
            overflow: hidden;
        }

        .results-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(34, 197, 94, 0.03) 0%, transparent 60%);
            animation: rotate 25s linear infinite;
        }

        .results-card h1 {
            font-size: 2.2rem;
            background: linear-gradient(135deg, #166534, #22c55e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 25px;
            position: relative;
            z-index: 1;
        }

        .results-card p {
            font-size: 1.15rem;
            color: #475569;
            margin-top: 20px;
            font-weight: 500;
            position: relative;
            z-index: 1;
        }

        .score-circle {
            width: 160px;
            height: 160px;
            border: 8px solid #22c55e;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto;
            font-size: 3rem;
            font-weight: 800;
            color: #166534;
            background: rgba(255, 255, 255, 0.8);
            box-shadow:
                0 12px 40px rgba(34, 197, 94, 0.2),
                inset 0 0 30px rgba(34, 197, 94, 0.05);
            position: relative;
            z-index: 1;
            animation: scoreReveal 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes scoreReveal {
            from {
                transform: scale(0.5) rotate(-20deg);
                opacity: 0;
            }

            to {
                transform: scale(1) rotate(0);
                opacity: 1;
            }
        }

        .results-card .nav-buttons {
            margin-top: 30px;
            justify-content: center;
            position: relative;
            z-index: 1;
        }

        /* =====================================================
           COMITÉS INSTITUCIONALES (Slide 8)
           ===================================================== */
        .committees-container {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(16px);
            border-radius: 24px;
            padding: 35px;
            box-shadow:
                0 20px 50px rgba(0, 0, 0, 0.07),
                0 8px 20px rgba(0, 0, 0, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }

        .committee-btn {
            padding: 14px 28px;
            border: 3px solid #e2e8f0;
            border-radius: 50px;
            background: white;
            cursor: pointer;
            font-weight: 700;
            font-size: 1rem;
            color: #64748b;
            transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .committee-btn:hover {
            border-color: #22c55e;
            color: #166534;
            transform: translateY(-2px);
        }

        .committee-btn.active {
            background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
            color: white;
            border-color: #15803d;
            box-shadow: 0 8px 24px rgba(34, 197, 94, 0.3);
        }

        .committee-content {
            display: none;
            animation: fadeSlideIn 0.5s ease;
        }

        .committee-content.active {
            display: block;
        }

        .func-item {
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            padding: 16px 20px;
            border-radius: 14px;
            font-size: 0.93rem;
            color: #475569;
            transition: all 0.3s ease;
            border: 1px solid rgba(226, 232, 240, 0.8);
            line-height: 1.5;
        }

        .func-item:hover {
            background: white;
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.06);
            border-color: #22c55e;
        }

        .reps-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
        }

        .rep-card {
            background: white;
            border-radius: 18px;
            padding: 24px;
            border-top: 4px solid #22c55e;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.06);
            transition: all 0.3s ease;
        }

        .rep-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.1);
        }

        .rep-role {
            background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
            color: #166534;
            padding: 8px 16px;
            border-radius: 10px;
            font-weight: 700;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            display: inline-block;
            margin-bottom: 15px;
        }

        .rep-card ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .rep-card li {
            padding: 8px 0;
            color: #475569;
            font-size: 0.95rem;
            border-bottom: 1px solid #f1f5f9;
            transition: all 0.2s ease;
        }

        .rep-card li:last-child {
            border-bottom: none;
        }

        .rep-card li:hover {
            color: #166534;
            padding-left: 8px;
        }

        /* =====================================================
           TIMELINE CARDS (Slide 7 - Accidente)
           ===================================================== */
        .timeline-card {
            background: white;
            border-radius: 18px;
            padding: 24px 20px;
            min-width: 180px;
            text-align: center;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.06);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border-top: 4px solid #22c55e;
            position: relative;
        }

        .timeline-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 14px 35px rgba(34, 197, 94, 0.15);
        }

        .step-number {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 1.1rem;
            margin: 0 auto 14px;
            box-shadow: 0 4px 12px rgba(34, 197, 94, 0.3);
        }

        .timeline-card h3 {
            color: #166534;
            font-size: 1rem;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .timeline-card p {
            color: #64748b;
            font-size: 0.85rem;
            line-height: 1.5;
        }

        .step-icon {
            font-size: 2rem;
            color: #22c55e;
            margin-top: 12px;
            display: block;
            opacity: 0.7;
            transition: all 0.3s ease;
        }

        .timeline-card:hover .step-icon {
            opacity: 1;
            transform: scale(1.2);
        }

        /* =====================================================
           STEP CARDS (Slide 10 - Estrategia 15 Pasos)
           ===================================================== */
        .step-card {
            background: linear-gradient(135deg, #ffffff 0%, #f0fdf4 100%);
            padding: 18px 22px;
            border-radius: 14px;
            border: 2px solid #e2e8f0;
            color: #475569;
            font-size: 0.9rem;
            font-weight: 500;
            line-height: 1.5;
            transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .step-card span {
            display: inline-flex;
            width: 28px;
            height: 28px;
            background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
            color: white;
            border-radius: 50%;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 0.8rem;
            margin-right: 10px;
            flex-shrink: 0;
        }

        .step-card:hover {
            border-color: #22c55e;
            background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(34, 197, 94, 0.15);
            color: #166534;
        }

        /* =====================================================
           BRIGADE ROLES (Slide 11)
           ===================================================== */
        .brigade-role {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 18px 24px;
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            border-radius: 16px;
            margin-bottom: 14px;
            border: 2px solid #e2e8f0;
            font-weight: 600;
            color: #374151;
            font-size: 1rem;
            transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .brigade-role i {
            font-size: 1.5rem;
            color: #f59e0b;
            width: 45px;
            height: 45px;
            background: #fffbeb;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .brigade-role:hover {
            border-color: #f59e0b;
            transform: translateX(10px);
            box-shadow: 0 8px 24px rgba(245, 158, 11, 0.15);
            background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
        }

        .brigade-role:hover i {
            background: #f59e0b;
            color: white;
            transform: scale(1.1) rotate(-5deg);
        }

        /* =====================================================
           MEETING POINT CARDS (Slide 12)
           ===================================================== */
        .meeting-point-card {
            background: white;
            border-radius: 22px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.06);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: 2px solid #e2e8f0;
            text-align: center;
        }

        .meeting-point-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 16px 40px rgba(0, 0, 0, 0.1);
            border-color: #22c55e;
        }

        .meeting-point-card h3 {
            color: #166534;
            font-size: 1.2rem;
            font-weight: 700;
            margin: 12px 0 8px;
        }

        .meeting-point-card p {
            color: #64748b;
            font-size: 0.95rem;
        }

        .mp-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
            font-weight: 800;
            margin: 0 auto;
            box-shadow: 0 6px 16px rgba(34, 197, 94, 0.3);
        }

        .mp-icon i {
            margin-right: 4px;
        }

        /* =====================================================
           RESPONSIVE OVERRIDES FOR EVALUATION
           ===================================================== */
        @media (max-width: 768px) {
            .quiz-card {
                padding: 24px 18px;
                border-radius: 18px;
            }

            .quiz-question {
                font-size: 1.05rem;
            }

            .quiz-options-row {
                flex-direction: column;
                gap: 12px;
            }

            .quiz-options-row .btn-quiz-option {
                max-width: 100%;
            }

            .btn-quiz-option {
                padding: 14px 20px;
                font-size: 0.9rem;
            }

            #match-area {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
            }

            .match-card {
                padding: 16px 10px;
            }

            .risk-tag {
                padding: 12px 20px;
                font-size: 0.85rem;
            }

            .results-card {
                padding: 30px 20px;
                border-radius: 24px;
            }

            .score-circle {
                width: 120px;
                height: 120px;
                font-size: 2.2rem;
                border-width: 6px;
            }

            .committees-container {
                padding: 20px 15px;
            }

            .reps-grid {
                grid-template-columns: 1fr;
            }

            .meeting-point-card {
                padding: 20px;
            }
        }

        @media (max-width: 480px) {
            #match-area {
                grid-template-columns: 1fr 1fr;
                gap: 10px;
            }

            .risk-selector {
                gap: 8px;
            }

            .risk-tag {
                padding: 10px 16px;
                font-size: 0.8rem;
                border-radius: 30px;
            }
        }

        /* Ajustes Responsive para Móvil */
        @media (max-width: 768px) {
            .container {
                padding: 12px;
            }

            .slide-title {
                font-size: 1.8rem;
            }

            .slide-description {
                font-size: 0.95rem;
            }
        }
    </style>
</head>

<body>

    <div class="container">

        <!-- Module Header -->
        <div class="module-header">
            <div style="font-weight: 800; color: #166534;"><i class="fas fa-shield-alt"></i> Módulo SST</div>
            <div class="progress-indicator" id="dots-container">
                <!-- Dots injected via JS -->
            </div>
        </div>

        <!-- slides content will be injected or structured here -->

        <!-- SLIDE 1: INTRO (Reimported for context) -->
        <div class="slide active" id="slide-1">
            <h1 class="slide-title">Bienvenido al SG-SST</h1>
            <p class="slide-description">Sistema de Gestión de Seguridad y Salud en el Trabajo</p>
            <div style="text-align: center; margin-top: 50px;">
                <div style="font-size: 8rem; color: #16a34a; animation: pulse 2s infinite;">🛡️</div>
                <h2 style="margin-top: 30px; color: #374151;">Tu seguridad es nuestra prioridad</h2>
                <p style="max-width: 600px; margin: 20px auto; color: #6b7280;">
                    En INFIBAGUÉ nos cuidamos entre todos. Este módulo te enseñará cómo prevenir riesgos y actuar ante
                    emergencias.
                </p>
            </div>
            <div class="nav-buttons" style="justify-content: center;">
                <button class="btn-nav btn-next" onclick="nextSlide(1)">Comenzar <i
                        class="fas fa-arrow-right"></i></button>
            </div>
        </div>

        <!-- SLIDE 2: OBJETIVOS (Interactive Cards) -->
        <div class="slide" id="slide-2">
            <h1 class="slide-title">Objetivos Principales</h1>
            <p class="slide-description">Pasa el cursor (o toca) para revelar nuestros compromisos.</p>

            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-top: 20px;">
                <!-- Cards copy from previous logic but refined -->
                <div class="matrix-cell" style="background: white;">
                    <i class="fas fa-check-double"></i>
                    <h3>Compromiso y Cumplimiento</h3>
                    <p class="matrix-desc" style="display:block; color: #666; margin-top:10px;">Evidenciar el compromiso
                        con SST y cumplir las normas legales vigentes.</p>
                </div>
                <div class="matrix-cell" style="background: white;">
                    <i class="fas fa-exclamation-triangle"></i>
                    <h3>Control de Riesgos</h3>
                    <p class="matrix-desc" style="display:block; color: #666; margin-top:10px;">Identificar peligros y
                        establecer controles efectivos.</p>
                </div>
                <div class="matrix-cell" style="background: white;">
                    <i class="fas fa-user-shield"></i>
                    <h3>Disminuir Accidentes</h3>
                    <p class="matrix-desc" style="display:block; color: #666; margin-top:10px;">Reducir la frecuencia y
                        severidad de incidentes laborales.</p>
                </div>
                <div class="matrix-cell" style="background: white;">
                    <i class="fas fa-sync-alt"></i>
                    <h3>Mejora Continua</h3>
                    <p class="matrix-desc" style="display:block; color: #666; margin-top:10px;">Auditorías, capacitación
                        y autoevaluación constante.</p>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="btn-nav btn-prev" onclick="prevSlide(2)">Atrás</button>
                <button class="btn-nav btn-next" onclick="nextSlide(2)">Siguiente</button>
            </div>
        </div>

        <!-- SLIDE 3: POLÍTICAS HUB (New Interactive) -->
        <div class="slide" id="slide-3">
            <!-- React App Container -->
            <div id="react-root"
                style="width: 100%; flex: 1; display: flex; flex-direction: column; min-height: 600px; background: #f8fafc; border-radius: 20px; overflow: hidden;">
            </div>

            <script type="text/babel" data-type="module">
                import React, { useState, useEffect } from 'react';
                import { createRoot } from 'react-dom/client';
                import {
                    ShieldCheck, Target, Beer, Car, HardHat, ChevronRight, ChevronLeft,
                    CheckCircle2, AlertTriangle, Users, Search, ClipboardList, Flame,
                    ArrowRight, ShieldAlert, GraduationCap, Info, Award
                } from 'lucide-react';

                const App = () => {
                    const [step, setStep] = useState(0);
                    const [isAnimating, setIsAnimating] = useState(false);

                    // Datos completos extraídos de las imágenes
                    const slides = [
                        {
                            id: 'inicio',
                            title: 'Portal de Seguridad y Salud en el Trabajo',
                            subtitle: 'INFIBAGUÉ',
                            type: 'welcome',
                            bg: 'from-green-700 via-green-600 to-[#719245]'
                        },
                        {
                            id: 'politica-general',
                            title: 'Política de Seguridad y Salud en el Trabajo',
                            type: 'policy-details',
                            description: 'Infibagué reconoce la importancia de su capital humano y adquiere el compromiso al más alto nivel de la organización en proteger el bienestar físico, mental y social, previniendo la ocurrencia de accidentes de trabajo y enfermedades laborales de todos sus servidores públicos, colaboradores, contratistas, proveedores y demás partes interesadas.',
                            boxes: [
                                {
                                    icon: <Search className="text-white" />,
                                    color: 'bg-[#719245]',
                                    title: 'Gestión de Riesgos',
                                    text: 'Identificar los peligros, evaluar y valorar los riesgos, establecer los respectivos controles asociados a todos los procesos de INFIBAGUÉ, para minimizar la ocurrencia de accidentes de trabajo y enfermedades laborales.'
                                },
                                {
                                    icon: <Users className="text-white" />,
                                    color: 'bg-[#FFB800]',
                                    title: 'Participación',
                                    text: 'Garantizar la consulta y participación de los servidores públicos en la información del SG-SST. Proteger la seguridad y salud de todos los servidores públicos y contratistas, mediante la mejora continua del SG-SST.'
                                },
                                {
                                    icon: <ClipboardList className="text-white" />,
                                    color: 'bg-[#719245]',
                                    title: 'Recursos y Reporte',
                                    text: 'Designar los recursos necesarios para el funcionamiento y adecuado mantenimiento del SG-SST. Reportar e investigar los accidentes de trabajo y enfermedades laborales e implementar medidas necesarias para la mitigación de los mismos.'
                                }
                            ],
                            bg: 'from-slate-50 to-slate-200'
                        },
                        {
                            id: 'objetivos',
                            title: 'Objetivos del Sistema de Gestión',
                            type: 'interactive-columns',
                            columns: [
                                {
                                    title: 'Compromiso',
                                    color: 'bg-[#719245]',
                                    points: [
                                        'Evidenciar el compromiso de INFIBAGUÉ, con la SST.',
                                        'Evaluar el cumplimiento de las actividades propuestas en el plan anual trabajo de SST.',
                                        'Definir, asignar y comunicar las responsabilidades en SST a todos los niveles de la organización.'
                                    ]
                                },
                                {
                                    title: 'Prevención',
                                    color: 'bg-[#FFB800]',
                                    points: [
                                        'Identificar los peligros, evaluar y valorar los riesgos y establecer los respectivos controles, minimizando la ocurrencia de AT y EL.',
                                        'Verificar el funcionamiento y gestión del COPASST.',
                                        'Garantizar el cumplimiento y cobertura del plan anual de capacitación y entrenamiento en SST.'
                                    ]
                                },
                                {
                                    title: 'Gestión',
                                    color: 'bg-[#719245]',
                                    points: [
                                        'Disminuir la accidentalidad y ausentismo laboral en términos de frecuencia y severidad, con participación del COPASST.',
                                        'Realizar la autoevaluación de cumplimiento del SG-SST.'
                                    ]
                                },
                                {
                                    title: 'Mejora',
                                    color: 'bg-[#FFB800]',
                                    points: [
                                        'Llevar a cabo la auditoría y la revisión por la alta dirección de acuerdo al plan anual establecido.',
                                        'Implementar las acciones preventivas y correctivas encaminadas a la mejora continua.'
                                    ]
                                }
                            ],
                            bg: 'from-white to-slate-100'
                        },
                        {
                            id: 'no-consumo',
                            title: 'Política de No Consumo',
                            tag: 'Alcohol y Sustancias Psicoactivas',
                            type: 'warning-special',
                            description: 'INFIBAGUÉ se compromete a mejorar la calidad de vida de sus colaboradores cumpliendo con la normatividad vigente y realizando acciones que promuevan hábitos de vida y trabajo saludable y seguro.',
                            rules: [
                                'Deben ser ejemplo de buenas conductas acordes con los valores del Instituto.',
                                'Está prohibido el consumo de cigarrillo y otras drogas no medicadas en el desarrollo de las funciones.',
                                'Está prohibido el consumo y presentarse al lugar de trabajo bajo efectos de bebidas alcohólicas y otras drogas no medicadas.',
                                'Todos los colaboradores deberán participar de las actividades de prevención de consumo de sustancias psicoactivas.',
                                'En caso de que un colaborador considere que tiene comportamientos abusivos de estas sustancias podrá buscar ayuda voluntaria en el Grupo GHSST.'
                            ],
                            bg: 'from-[#1e293b] to-[#0f172a]'
                        },
                        {
                            id: 'operativa',
                            title: 'Seguridad y Protección',
                            type: 'dual-cards',
                            sections: [
                                {
                                    title: 'Política de Seguridad Vial',
                                    icon: <Car size={40} />,
                                    color: 'border-[#719245]',
                                    textColor: 'text-[#719245]',
                                    text: 'Proteger a todos los colaboradores y demás partes interesadas por medio de la implementación del PESV, orientado a la promoción y prevención de accidentes de tránsito.'
                                },
                                {
                                    title: 'Política de Uso de EPP',
                                    icon: <HardHat size={40} />,
                                    color: 'border-[#FFB800]',
                                    textColor: 'text-orange-600',
                                    points: [
                                        'Suministrar los equipos y EPP certificados y adecuados, según la naturaleza del riesgo.',
                                        'Utilizar adecuadamente, con carácter obligatorio, los equipos y EPP asignados.',
                                        'Cuidar correctamente los equipos y EPP requeridos para el uso exclusivo en las labores de la empresa.'
                                    ]
                                }
                            ],
                            bg: 'from-slate-100 to-green-50'
                        }
                    ];

                    const handleNext = () => {
                        if (step < slides.length - 1) {
                            setIsAnimating(true);
                            setTimeout(() => {
                                setStep(s => s + 1);
                                setIsAnimating(false);
                            }, 400);
                        }
                    };

                    const handlePrev = () => {
                        if (step > 0) {
                            setIsAnimating(true);
                            setTimeout(() => {
                                setStep(s => s - 1);
                                setIsAnimating(false);
                            }, 400);
                        }
                    };

                    const slide = slides[step];

                    return (
                        <div className="relative w-full h-full flex flex-col font-sans overflow-hidden select-none bg-[#f1f5f9] rounded-2xl">

                            {/* Barra de Progreso Superior */}
                            <div className="absolute top-0 left-0 w-full h-1.5 bg-slate-200 z-[60]">
                                <div
                                    className="h-full bg-[#719245] transition-all duration-700 ease-in-out shadow-[0_0_10px_rgba(113,146,69,0.5)]"
                                    style={{ width: `${((step + 1) / slides.length) * 100}%` }}
                                />
                            </div>

                            {/* Navegación (Flechas Laterales) */}
                            <div className="absolute inset-0 pointer-events-none flex items-center justify-between px-2 md:px-6 z-40">
                                {step > 0 ? (
                                    <button
                                        onClick={handlePrev}
                                        className="pointer-events-auto p-2 md:p-4 bg-white/80 backdrop-blur-md rounded-full text-slate-700 shadow-xl hover:scale-110 active:scale-95 transition-all"
                                    >
                                        <ChevronLeft size={24} className="md:w-8 md:h-8" />
                                    </button>
                                ) : <div />}

                                {step < slides.length - 1 ? (
                                    <button
                                        onClick={handleNext}
                                        className="pointer-events-auto p-2 md:p-4 bg-[#719245] rounded-full text-white shadow-xl hover:scale-110 active:scale-95 transition-all"
                                    >
                                        <ChevronRight size={24} className="md:w-8 md:h-8" />
                                    </button>
                                ) : <div />}
                            </div>

                            {/* Header Fijo */}
                            <header className="h-20 flex items-center justify-between px-6 md:px-12 bg-white/60 backdrop-blur-lg border-b border-slate-200 z-50">
                                <div className="flex items-center gap-4">
                                    <div className="w-10 h-10 bg-gradient-to-br from-[#719245] to-green-800 rounded-xl flex items-center justify-center text-white shadow-lg">
                                        <ShieldCheck size={24} />
                                    </div>
                                    <div>
                                        <h1 className="font-black text-slate-800 leading-none text-lg">CAMPUS INFIBAGUÉ</h1>
                                        <p className="text-[10px] uppercase tracking-widest font-bold text-[#719245]">Seguridad y Salud</p>
                                    </div>
                                </div>
                                <div className="flex items-center gap-2 px-4 py-2 bg-white rounded-full border shadow-sm">
                                    <span className="text-xs font-black text-slate-400">{step + 1}</span>
                                    <div className="w-[1px] h-3 bg-slate-200" />
                                    <span className="text-xs font-black text-slate-800">{slides.length}</span>
                                </div>
                            </header>

                            {/* Contenedor de Diapositivas */}
                            <main className={`flex-1 overflow-y-auto transition-all duration-500 ease-out ${isAnimating ? 'opacity-0 translate-y-4 scale-95' : 'opacity-100 translate-y-0 scale-100'} bg-gradient-to-br ${slide.bg}`}>
                                <div className="min-h-full flex items-center justify-center p-6 md:p-12">
                                    <div className="w-full max-w-6xl">

                                        {/* SLIDE: BIENVENIDA */}
                                        {slide.type === 'welcome' && (
                                            <div className="text-center text-white space-y-8 animate-in fade-in zoom-in duration-700">
                                                <div className="inline-flex p-6 bg-white/20 backdrop-blur-2xl rounded-[2.5rem] shadow-2xl border border-white/30">
                                                    <GraduationCap size={80} strokeWidth={1.5} />
                                                </div>
                                                <h2 className="text-5xl md:text-8xl font-black tracking-tighter leading-none">{slide.title}</h2>
                                                <p className="text-2xl md:text-4xl font-light opacity-90">{slide.subtitle}</p>
                                                <div className="pt-8">
                                                    <button onClick={handleNext} className="bg-white text-[#719245] px-12 py-5 rounded-2xl font-black text-xl shadow-2xl hover:scale-105 active:scale-95 transition-all flex items-center gap-4 mx-auto group">
                                                        INICIAR <ArrowRight className="group-hover:translate-x-2 transition-transform" />
                                                    </button>
                                                </div>
                                            </div>
                                        )}

                                        {/* SLIDE: POLÍTICA DETALLADA */}
                                        {slide.type === 'policy-details' && (
                                            <div className="grid lg:grid-cols-12 gap-12 items-center">
                                                <div className="lg:col-span-5 space-y-6">
                                                    <span className="px-4 py-1.5 bg-[#719245] text-white rounded-full text-xs font-bold uppercase tracking-widest">Compromiso Institucional</span>
                                                    <h2 className="text-4xl md:text-5xl font-black text-[#719245] leading-tight">{slide.title}</h2>
                                                    <p className="text-slate-600 text-lg leading-relaxed">{slide.description}</p>
                                                    <div className="h-1.5 w-24 bg-[#FFB800] rounded-full" />
                                                </div>
                                                <div className="lg:col-span-7 grid gap-4">
                                                    {slide.boxes.map((box, i) => (
                                                        <div key={i} className="group bg-white/80 backdrop-blur-sm p-6 rounded-[2rem] border-2 border-transparent hover:border-[#719245] hover:bg-white shadow-xl transition-all duration-300 flex gap-6 items-start">
                                                            <div className={`w-14 h-14 flex-shrink-0 rounded-2xl ${box.color} flex items-center justify-center shadow-lg group-hover:rotate-6 transition-transform`}>
                                                                {box.icon}
                                                            </div>
                                                            <div>
                                                                <h4 className="font-black text-slate-800 mb-1 uppercase text-sm tracking-tight">{box.title}</h4>
                                                                <p className="text-sm text-slate-500 leading-relaxed font-medium">{box.text}</p>
                                                            </div>
                                                        </div>
                                                    ))}
                                                </div>
                                            </div>
                                        )}

                                        {/* SLIDE: COLUMNAS INTERACTIVAS (Igual a la imagen 1) */}
                                        {slide.type === 'interactive-columns' && (
                                            <div className="space-y-10">
                                                <div className="text-center max-w-2xl mx-auto">
                                                    <h2 className="text-4xl md:text-5xl font-black text-slate-800 tracking-tight">{slide.title}</h2>
                                                    <p className="text-slate-500 mt-2">Haz clic o toca cada pilar para ver más detalles.</p>
                                                </div>
                                                <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                                                    {slide.columns.map((col, i) => (
                                                        <div key={i} className="group relative bg-white rounded-[2.5rem] overflow-hidden shadow-xl border border-slate-100 hover:shadow-2xl hover:-translate-y-3 transition-all duration-500">
                                                            <div className={`h-4 ${col.color}`} />
                                                            <div className="p-8">
                                                                <div className="flex items-center gap-3 mb-8">
                                                                    <div className={`w-8 h-8 rounded-lg ${col.color} bg-opacity-20 flex items-center justify-center`}>
                                                                        <Target size={18} className={i % 2 === 0 ? 'text-[#719245]' : 'text-orange-600'} />
                                                                    </div>
                                                                    <h3 className="font-black text-slate-800 uppercase text-lg tracking-tighter">{col.title}</h3>
                                                                </div>
                                                                <ul className="space-y-6">
                                                                    {col.points.map((p, j) => (
                                                                        <li key={j} className="flex gap-4 text-sm text-slate-600 leading-snug group-hover:text-slate-900 transition-colors">
                                                                            <div className={`w-1.5 h-1.5 rounded-full mt-1.5 flex-shrink-0 ${col.color}`} />
                                                                            <span className="font-medium italic opacity-90">{p}</span>
                                                                        </li>
                                                                    ))}
                                                                </ul>
                                                            </div>
                                                            <div className={`absolute bottom-0 right-0 p-4 opacity-5 group-hover:opacity-10 transition-opacity`}>
                                                                <Award size={80} />
                                                            </div>
                                                        </div>
                                                    ))}
                                                </div>
                                            </div>
                                        )}

                                        {/* SLIDE: NO CONSUMO (Estilo Alto Impacto) */}
                                        {slide.type === 'warning-special' && (
                                            <div className="bg-white/5 backdrop-blur-2xl rounded-[3rem] p-8 md:p-16 border border-white/10 text-white shadow-[0_32px_64px_-15px_rgba(0,0,0,0.5)] relative overflow-hidden">
                                                <div className="absolute top-0 right-0 w-96 h-96 bg-red-600/10 rounded-full blur-[100px]" />
                                                <div className="relative z-10">
                                                    <div className="flex items-center gap-3 text-[#FFB800] font-black text-sm uppercase tracking-widest mb-6">
                                                        <ShieldAlert size={24} /> {slide.tag}
                                                    </div>
                                                    <h2 className="text-5xl md:text-7xl font-black mb-10 tracking-tighter leading-none">{slide.title}</h2>
                                                    <div className="grid lg:grid-cols-2 gap-16 items-start">
                                                        <div className="space-y-8">
                                                            <p className="text-xl md:text-2xl text-slate-300 leading-relaxed font-light">{slide.description}</p>
                                                            <div className="p-6 bg-red-500/10 border border-red-500/20 rounded-2xl flex items-center gap-6">
                                                                <div className="w-16 h-16 bg-red-500 rounded-2xl flex items-center justify-center shadow-lg">
                                                                    <Flame size={32} />
                                                                </div>
                                                                <p className="text-sm font-bold text-red-100 uppercase tracking-wide">Prohibición Absoluta en Jornada Laboral</p>
                                                            </div>
                                                        </div>
                                                        <div className="space-y-4">
                                                            {slide.rules.map((rule, i) => (
                                                                <div key={i} className="flex items-start gap-4 p-5 bg-white/5 rounded-3xl border border-white/5 hover:bg-white/10 transition-all group">
                                                                    <div className="mt-1 flex-shrink-0">
                                                                        <CheckCircle2 size={18} className="text-[#FFB800]" />
                                                                    </div>
                                                                    <p className="text-sm text-slate-200 group-hover:text-white transition-colors">{rule}</p>
                                                                </div>
                                                            ))}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        )}

                                        {/* SLIDE: OPERATIVA (Vial y EPP) */}
                                        {slide.type === 'dual-cards' && (
                                            <div className="space-y-12">
                                                <div className="text-center">
                                                    <h2 className="text-4xl md:text-6xl font-black text-slate-800 tracking-tight">{slide.title}</h2>
                                                </div>
                                                <div className="grid md:grid-cols-2 gap-10">
                                                    {slide.sections.map((sec, i) => (
                                                        <div key={i} className={`bg-white p-10 md:p-14 rounded-[3.5rem] shadow-2xl border-b-[12px] ${sec.color} hover:-translate-y-2 transition-transform relative overflow-hidden`}>
                                                            <div className="absolute top-8 right-8 text-slate-50">
                                                                {React.cloneElement(sec.icon, { size: 100 })}
                                                            </div>
                                                            <div className="relative z-10">
                                                                <div className={`w-20 h-20 bg-slate-50 ${sec.textColor} rounded-3xl flex items-center justify-center mb-8 shadow-inner`}>
                                                                    {sec.icon}
                                                                </div>
                                                                <h3 className="text-3xl font-black text-slate-800 mb-6 leading-tight">{sec.title}</h3>
                                                                {sec.text ? (
                                                                    <p className="text-slate-500 text-lg leading-relaxed">{sec.text}</p>
                                                                ) : (
                                                                    <ul className="space-y-4">
                                                                        {sec.points.map((p, k) => (
                                                                            <li key={k} className="flex gap-4 text-slate-600 text-sm font-medium">
                                                                                <CheckCircle2 size={18} className="text-orange-500 flex-shrink-0" />
                                                                                {p}
                                                                            </li>
                                                                        ))}
                                                                    </ul>
                                                                )}
                                                            </div>
                                                        </div>
                                                    ))}
                                                </div>
                                            </div>
                                        )}

                                    </div>
                                </div>
                            </main>

                            {/* Controles de Navegación PC (Superior) */}
                            <header className="hidden md:flex justify-between items-center bg-white border-b border-slate-200 px-8 py-4 sticky top-0 z-50">
                                <button
                                    onClick={handlePrev}
                                    disabled={step === 0}
                                    className={`flex items-center gap-2 font-black text-xs tracking-widest px-5 py-3 rounded-xl transition
                           ${step === 0 ? 'opacity-40 cursor-not-allowed text-slate-300' : 'text-slate-500 hover:bg-slate-100'}`}
                                >
                                    <ChevronLeft size={16} /> VOLVER
                                </button>

                                <div className="text-xs font-black tracking-widest text-slate-400">
                                    {step + 1} / {slides.length}
                                </div>

                                {step < slides.length - 1 ? (
                                    <button
                                        onClick={handleNext}
                                        className="flex items-center gap-3 bg-[#719245] text-white px-8 py-3 rounded-xl font-black text-xs tracking-widest shadow-lg shadow-green-200 hover:opacity-95 transition"
                                    >
                                        SIGUIENTE <ChevronRight size={16} />
                                    </button>
                                ) : (
                                    <div className="flex items-center gap-2 text-[#719245] font-black text-xs tracking-widest animate-pulse">
                                        <CheckCircle2 size={16} /> FINALIZADO
                                    </div>
                                )}
                            </header>

                            {/* Controles de Navegación Móvil (Inferior) */}
                            <footer className="bg-white border-t border-slate-200 p-5 md:hidden flex justify-between items-center z-50">
                                <button
                                    onClick={handlePrev}
                                    disabled={step === 0}
                                    className={`flex items-center gap-2 font-black text-xs tracking-widest px-4 py-3 rounded-xl ${step === 0 ? 'opacity-0' : 'text-slate-400'}`}
                                >
                                    <ChevronLeft size={16} /> VOLVER
                                </button>

                                {step < slides.length - 1 ? (
                                    <button
                                        onClick={handleNext}
                                        className="flex items-center gap-3 bg-[#719245] text-white px-8 py-3 rounded-xl font-black text-xs tracking-widest shadow-lg shadow-green-200"
                                    >
                                        SIGUIENTE <ChevronRight size={16} />
                                    </button>
                                ) : (
                                    <div className="flex items-center gap-2 text-[#719245] font-black text-xs tracking-widest animate-pulse">
                                        <CheckCircle2 size={16} /> FINALIZADO
                                    </div>
                                )}
                            </footer>

                            {/* Estilos para Scroll y Animaciones */}
                            <style>{`
                        @keyframes fade-in { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
                        @keyframes zoom-in { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }
                        .animate-in { animation: var(--anim-name) var(--anim-duration) ease-out; }
                        .fade-in { --anim-name: fade-in; --anim-duration: 0.6s; }
                        .zoom-in { --anim-name: zoom-in; --anim-duration: 0.5s; }
                        
                        ::-webkit-scrollbar { width: 5px; }
                        ::-webkit-scrollbar-track { background: transparent; }
                        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
                      `}</style>
                        </div>
                    );
                };

                const root = createRoot(document.getElementById('react-root'));
                root.render(<App />);
            </script>

            <div class="nav-buttons">
                <button class="btn-nav btn-prev" onclick="prevSlide(3)">Atrás</button>
                <button class="btn-nav btn-next" onclick="nextSlide(3)">Siguiente</button>
            </div>
        </div>

        <!-- SLIDE 4: REGLAMENTO DE HIGIENE (Scroll View) -->
        <div class="slide" id="slide-4">
            <h1 class="slide-title">Reglamento de Higiene</h1>
            <p class="slide-description">Identificación y control de riesgos industriales.</p>

            <div
                style="background: #fff; padding: 30px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); display: flex; align-items: center; gap: 30px;">
                <div style="flex: 1;">
                    <img src="https://img.freepik.com/free-vector/factory-workers-concept-illustration_114360-4244.jpg?t=st=1707160000~exp=1707163600~hmac=xyz"
                        alt="Higiene Industrial" style="width: 100%; border-radius: 15px;"
                        onerror="this.src='https://via.placeholder.com/300x200'">
                </div>
                <div style="flex: 1.5;">
                    <h3 style="color: #166534; margin-bottom: 15px;">Objetivo y Alcance</h3>

                    <div style="margin-bottom: 20px;">
                        <h4 style="color: #f59e0b; margin-bottom: 5px;">📍 OBJETIVO</h4>
                        <p>Identificar peligros y valorar riesgos en lugares de trabajo que puedan afectar la seguridad
                            y salud.</p>
                    </div>

                    <div>
                        <h4 style="color: #f59e0b; margin-bottom: 5px;">👥 ALCANCE</h4>
                        <p>Aplica para <strong>TODOS</strong>: planta permanente, temporal, contratistas, y visitantes
                            de INFIBAGUÉ.</p>
                    </div>

                    <div
                        style="margin-top: 20px; padding: 10px; background: #f0fdf4; border-radius: 8px; font-size: 0.9rem;">
                        <i class="fas fa-info-circle"></i> Cumplir este reglamento es obligatorio por ley.
                    </div>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="btn-nav btn-prev" onclick="prevSlide(4)">Atrás</button>
                <button class="btn-nav btn-next" onclick="nextSlide(4)">Siguiente</button>
            </div>
        </div>

        <!-- SLIDE 5: PELIGRO VS RIESGO (Interactive Game) -->
        <div class="slide" id="slide-5">
            <h1 class="slide-title">Peligro vs Riesgo</h1>
            <p class="slide-description">¿Conoces la diferencia? Toca los recuadros para descubrirla.</p>

            <div class="risk-scenario">
                <div class="equation-area">
                    <div class="equation-item" onclick="revealItem(this, 'peligro')">
                        <i class="fas fa-bolt"></i> PELIGRO
                        <div class="matrix-desc">Fuente con potencial de daño</div>
                    </div>
                    <div class="plus-sign">+</div>
                    <div class="equation-item" onclick="revealItem(this, 'exposicion')">
                        <i class="fas fa-running"></i> EXPOSICIÓN
                        <div class="matrix-desc">Acto inseguro o situación</div>
                    </div>
                    <div class="equal-sign">=</div>
                    <div class="equation-item" onclick="revealItem(this, 'riesgo')">
                        <i class="fas fa-exclamation-circle"></i> RIESGO
                        <div class="matrix-desc">Probabilidad x Severidad</div>
                    </div>
                </div>

                <div class="visual-demo" id="demo-box">
                    <div class="demo-msg">Toca los elementos de arriba para armar la ecuación</div>
                    <!-- Animations inserted here -->
                </div>

                <div style="margin-top: 20px; font-style: italic; color: #666;">
                    Ejemplo: <strong>Escalera</strong> (Peligro) + <strong>Bajar corriendo</strong> (Exposición) =
                    <strong>Caída</strong> (Riesgo materializado)
                </div>
            </div>

            <div class="nav-buttons">
                <button class="btn-nav btn-prev" onclick="prevSlide(5)">Atrás</button>
                <button class="btn-nav btn-next" onclick="nextSlide(5)">Siguiente</button>
            </div>
        </div>

        <!-- SLIDE 6: MATRIZ IPEVR (Interactive Grid) -->
        <div class="slide" id="slide-6">
            <h1 class="slide-title">Matriz IPEVR</h1>
            <p class="slide-description">Identificación de Peligros, Evaluación y Valoración de Riesgos (GTC 45)</p>

            <div class="matrix-container">
                <div class="matrix-info">
                    <h3 style="color: #166534;">¿Qué contempla?</h3>
                    <p style="margin-top: 15px; line-height: 1.6; color: #4b5563;">
                        Es la herramienta fundamental desarrollada por el empleador (con participación de todos) para
                        diagnosticar las condiciones de trabajo.
                    </p>
                    <div style="margin-top: 30px; text-align: center;">
                        <i class="fas fa-project-diagram" style="font-size: 5rem; color: #e2e8f0;"></i>
                    </div>
                </div>
                <div class="matrix-grid">
                    <div class="matrix-cell">
                        <i class="fas fa-industry"></i>
                        <div>Todos los Procesos</div>
                        <div class="matrix-desc">Operativos, administrativos y de apoyo.</div>
                    </div>
                    <div class="matrix-cell">
                        <i class="fas fa-clock"></i>
                        <div>Rutinas</div>
                        <div class="matrix-desc">Actividades rutinarias y no rutinarias.</div>
                    </div>
                    <div class="matrix-cell">
                        <i class="fas fa-cogs"></i>
                        <div>Maquinaria</div>
                        <div class="matrix-desc">Equipos y herramientas de trabajo.</div>
                    </div>
                    <div class="matrix-cell">
                        <i class="fas fa-users-cog"></i>
                        <div>Contratación</div>
                        <div class="matrix-desc">Independiente de la forma de vinculación.</div>
                    </div>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="btn-nav btn-prev" onclick="prevSlide(6)">Atrás</button>
                <button class="btn-nav btn-next" onclick="nextSlide(6)">Siguiente</button>
            </div>
        </div>

        <!-- SLIDE 7: ACCIDENTE DE TRABAJO (Timeline) -->
        <div class="slide" id="slide-7">
            <h1 class="slide-title">¿Qué hacer en caso de Accidente?</h1>
            <p class="slide-description">Sigue estos 6 pasos vitales para reportar y gestionar un accidente laboral.</p>

            <div
                style="background: white; padding: 40px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); overflow-x: auto;">
                <div style="display: flex; gap: 30px; min-width: 800px; padding-bottom: 20px;">

                    <!-- Step 1 -->
                    <div class="timeline-card">
                        <div class="step-number">1</div>
                        <h3>Reporte Inmediato</h3>
                        <p>Notifica a tu jefe inmediato y al área de SST sobre el incidente.</p>
                        <i class="fas fa-bullhorn step-icon"></i>
                    </div>

                    <!-- Step 2 -->
                    <div class="timeline-card">
                        <div class="step-number">2</div>
                        <h3>Reporte a ARL</h3>
                        <p>SST realizará el reporte oficial ante ARL POSITIVA.</p>
                        <i class="fas fa-file-medical step-icon"></i>
                    </div>

                    <!-- Step 3 -->
                    <div class="timeline-card">
                        <div class="step-number">3</div>
                        <h3>Primeros Auxilios</h3>
                        <p>Recibirás atención inmediata si la lesión es leve.</p>
                        <i class="fas fa-user-md step-icon"></i>
                    </div>

                    <!-- Step 4 -->
                    <div class="timeline-card">
                        <div class="step-number">4</div>
                        <h3>Atención Médica</h3>
                        <p>Traslado al centro asistencial más cercano si es necesario.</p>
                        <i class="fas fa-ambulance step-icon"></i>
                    </div>

                    <!-- Step 5 -->
                    <div class="timeline-card">
                        <div class="step-number">5</div>
                        <h3>Legalización</h3>
                        <p>SST legaliza el accidente en la página web de la ARL.</p>
                        <i class="fas fa-desktop step-icon"></i>
                    </div>

                    <!-- Step 6 -->
                    <div class="timeline-card">
                        <div class="step-number">6</div>
                        <h3>Radicación</h3>
                        <p>Radicar incapacidad original y órdenes en Ventanilla Única.</p>
                        <i class="fas fa-folder-open step-icon"></i>
                    </div>

                </div>
            </div>

            <div class="nav-buttons">
                <button class="btn-nav btn-prev" onclick="prevSlide(7)">Atrás</button>
                <button class="btn-nav btn-next" onclick="nextSlide(7)">Ver Comités</button>
            </div>
        </div>

        <!-- SLIDE 8: COMITÉS (Interactive Explorer) -->
        <div class="slide" id="slide-8">
            <h1 class="slide-title">Comités Institucionales</h1>
            <p class="slide-description">Nuestros equipos de apoyo y vigilancia.</p>

            <div class="committees-container">
                <!-- Toggle Switch -->
                <div style="display: flex; justify-content: center; gap: 20px; margin-bottom: 30px;">
                    <button class="committee-btn active" id="btn-convivencia" onclick="switchCommittee('convivencia')">
                        <i class="fas fa-handshake"></i> Convivencia
                    </button>
                    <button class="committee-btn" id="btn-copasst" onclick="switchCommittee('copasst')">
                        <i class="fas fa-hard-hat"></i> COPASST
                    </button>
                </div>

                <!-- CONVIVENCIA CONTENT -->
                <div id="committee-convivencia" class="committee-content active">
                    <div
                        style="background: #eef2ff; border-left: 5px solid #6366f1; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                        <h3 style="color: #4338ca;">Funciones Clave</h3>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-top: 15px;">
                            <div class="func-item">📢 Recibir y tramitar quejas de acoso laboral.</div>
                            <div class="func-item">🤝 Promover relaciones laborales saludables.</div>
                            <div class="func-item">⚖️ Mediar en conflictos laborales.</div>
                            <div class="func-item">📊 Informes trimestrales de gestión.</div>
                        </div>
                    </div>

                    <h3 style="text-align: center; color: #374151; margin: 20px 0;">Representantes</h3>
                    <div class="reps-grid">
                        <div class="rep-card">
                            <div class="rep-role">Trabajadores</div>
                            <ul>
                                <li>Diego Camilo Solano</li>
                                <li>Albear Nieto Beltran</li>
                                <li>José María Córdoba</li>
                                <li>Óscar Fernando Gómez</li>
                            </ul>
                        </div>
                        <div class="rep-card">
                            <div class="rep-role">Gerencia</div>
                            <ul>
                                <li>Carlos Javier Ceron</li>
                                <li>Alejandra Contreras</li>
                                <li>Jorge Rodríguez</li>
                                <li>Jarol Santos</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- COPASST CONTENT -->
                <div id="committee-copasst" class="committee-content">
                    <div
                        style="background: #fffbeb; border-left: 5px solid #f59e0b; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                        <h3 style="color: #b45309;">Funciones Clave</h3>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-top: 15px;">
                            <div class="func-item">🔍 Inspeccionar lugares de trabajo.</div>
                            <div class="func-item">🚨 Investigar accidentes de trabajo.</div>
                            <div class="func-item">🗣️ Canal de comunicación trabajadores-empresa.</div>
                            <div class="func-item">📈 Proponer medidas de Seguridad y Salud.</div>
                        </div>
                    </div>

                    <h3 style="text-align: center; color: #374151; margin: 20px 0;">Representantes</h3>
                    <div class="reps-grid">
                        <div class="rep-card" style="border-top-color: #f59e0b;">
                            <div class="rep-role" style="background: #fef3c7; color: #b45309;">Gerencia</div>
                            <ul>
                                <li>Jhon Ferley Amaya</li>
                                <li>Adriana Cruz Amaya</li>
                            </ul>
                        </div>
                    </div>
                </div>

            </div>

            <div class="nav-buttons">
                <button class="btn-nav btn-prev" onclick="prevSlide(8)">Atrás</button>
                <button class="btn-nav btn-next" onclick="nextSlide(8)">Plan Emergencias</button>
            </div>
        </div>



        <!-- SLIDE 9: PLAN DE EMERGENCIAS (Intro) -->
        <div class="slide" id="slide-9">
            <h1 class="slide-title">Plan de Emergencias</h1>
            <p class="slide-description">Prevención, preparación y respuesta.</p>

            <div style="display: flex; flex-wrap: wrap; gap: 20px; align-items: stretch;">
                <div
                    style="flex: 1; background: white; padding: 30px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);">
                    <h3 style="color: #166534; margin-bottom: 20px;"><i class="fas fa-book-reader"></i> ¿Qué es?</h3>
                    <p style="line-height: 1.8; color: #4b5563;">
                        Es un conjunto de estrategias anticipadas, normas y procedimientos para prevenir y disminuir
                        riesgos
                        ante situaciones de emergencia.
                        Busca proteger personas, recursos y procesos mediante la preparación ante amenazas internas o
                        externas.
                    </p>
                </div>
                <div
                    style="flex: 1; background: #ecfccb; padding: 30px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);">
                    <h3 style="color: #65a30d; margin-bottom: 20px;"><i class="fas fa-bullseye"></i> Objetivo General
                    </h3>
                    <p style="font-size: 1.1rem; font-weight: 600; color: #3f6212;">
                        "Disminuir los niveles de riesgo de cada una de las amenazas existentes en las sedes del
                        INSTITUTO
                        DE FINANCIAMIENTO, PROMOCIÓN Y DESARROLLO DE IBAGUÉ."
                    </p>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="btn-nav btn-prev" onclick="prevSlide(9)">Atrás</button>
                <button class="btn-nav btn-next" onclick="nextSlide(9)">Estrategia</button>
            </div>
        </div>

        <!-- SLIDE 10: ESTRATEGIA 15 PASOS (Scroll Grid) -->
        <div class="slide" id="slide-10">
            <h1 class="slide-title">Estrategia de 15 Pasos</h1>
            <p class="slide-description">Ruta crítica para la gestión de emergencias.</p>

            <div
                style="background: white; border-radius: 20px; padding: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.05); height: 400px; overflow-y: auto;">
                <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px;">
                    <!-- Items generated via JS or static to be safe -->
                    <div class="step-card"><span>1</span> Conformar grupos de prevención.</div>
                    <div class="step-card"><span>2</span> Analizar amenazas (naturales/tecnológicas).</div>
                    <div class="step-card"><span>3</span> Determinar vulnerabilidad.</div>
                    <div class="step-card"><span>4</span> Establecer niveles de riesgo.</div>
                    <div class="step-card"><span>5</span> Implementar plan de mitigación.</div>
                    <div class="step-card"><span>6</span> Inventario de recursos básicos.</div>
                    <div class="step-card"><span>7</span> Definir estructura organizacional.</div>
                    <div class="step-card"><span>8</span> Estructurar procedimientos básicos.</div>
                    <div class="step-card"><span>9</span> Identificar rutas de evacuación.</div>
                    <div class="step-card"><span>10</span> Programa de señalización.</div>
                    <div class="step-card"><span>11</span> Sistema de notificación.</div>
                    <div class="step-card"><span>12</span> Mecanismo de protección.</div>
                    <div class="step-card"><span>13</span> Plan de respuesta rápida.</div>
                    <div class="step-card"><span>14</span> Plan de capacitación y entrenamiento.</div>
                    <div class="step-card"><span>15</span> Realizar simulacros de evaluación.</div>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="btn-nav btn-prev" onclick="prevSlide(10)">Atrás</button>
                <button class="btn-nav btn-next" onclick="nextSlide(10)">Brigada</button>
            </div>
        </div>

        <!-- SLIDE 11: BRIGADA DE EMERGENCIA -->
        <div class="slide" id="slide-11">
            <h1 class="slide-title">Brigada de Emergencia</h1>
            <p class="slide-description">Roles activos en caso de siniestro.</p>

            <div style="display: flex; gap: 30px; align-items: center; justify-content: center; flex-wrap: wrap;">
                <div style="flex: 1; min-width: 300px; text-align: center;">
                    <i class="fas fa-users-cog" style="font-size: 8rem; color: #f59e0b;"></i>
                </div>
                <div style="flex: 1; min-width: 300px;">
                    <div class="brigade-role"><i class="fas fa-user-nurse"></i> Líder Primeros Auxilios</div>
                    <div class="brigade-role"><i class="fas fa-fire-extinguisher"></i> Control de Incendios</div>
                    <div class="brigade-role"><i class="fas fa-person-running"></i> Evacuación</div>
                    <div class="brigade-role"><i class="fas fa-search-location"></i> Búsqueda y Rescate</div>
                    <div class="brigade-role"><i class="fas fa-headset"></i> Comunicaciones</div>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="btn-nav btn-prev" onclick="prevSlide(11)">Atrás</button>
                <button class="btn-nav btn-next" onclick="nextSlide(11)">Puntos de Encuentro</button>
            </div>
        </div>

        <!-- SLIDE 12: PUNTOS DE ENCUENTRO -->
        <div class="slide" id="slide-12">
            <h1 class="slide-title">Puntos de Encuentro</h1>
            <p class="slide-description">¿Dónde ir en caso de evacuación?</p>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-top: 20px;">
                <!-- Punto 1 -->
                <div class="meeting-point-card">
                    <div class="mp-icon"><i class="fas fa-map-marker-alt"></i> 1</div>
                    <h3>Punto 1</h3>
                    <p>Parqueadero frente al auditorio</p>
                    <div
                        style="height: 150px; background: #e2e8f0; border-radius: 10px; margin-top: 15px; display: flex; align-items: center; justify-content: center;">
                        <i class="fas fa-parking" style="font-size: 3rem; color: #cbd5e1;"></i>
                    </div>
                </div>
                <!-- Punto 2 -->
                <div class="meeting-point-card">
                    <div class="mp-icon"><i class="fas fa-map-marker-alt"></i> 2</div>
                    <h3>Punto 2</h3>
                    <p>Módulo II, Frente a Gestión Documental</p>
                    <div
                        style="height: 150px; background: #e2e8f0; border-radius: 10px; margin-top: 15px; display: flex; align-items: center; justify-content: center;">
                        <i class="fas fa-building" style="font-size: 3rem; color: #cbd5e1;"></i>
                    </div>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="btn-nav btn-prev" onclick="prevSlide(12)">Atrás</button>
                <button class="btn-nav btn-next" onclick="nextSlide(12)">🧠 Evaluación</button>
            </div>
        </div>



        <!-- SLIDE 13: EVALUACIÓN NIVEL 1 (VERDADERO/FALSO) -->
        <div class="slide" id="slide-13">
            <h1 class="slide-title">Desafío Final: Nivel 1</h1>
            <p class="slide-description">Verdadero o Falso. ¡Responde rápido!</p>

            <div class="quiz-container" id="quiz-level-1">
                <!-- Question 1 -->
                <div class="quiz-card active" id="q1">
                    <div class="quiz-question">1. El sistema de seguridad social está conformado por: EPS, ARL, AFP.
                    </div>
                    <div class="quiz-options-row">
                        <button class="btn-quiz-option true" onclick="answerQ(1, 'V')">Verdadero</button>
                        <button class="btn-quiz-option false" onclick="answerQ(1, 'F')">Falso</button>
                    </div>
                </div>
                <!-- Question 2 -->
                <div class="quiz-card" id="q2">
                    <div class="quiz-question">2. Accidente de trabajo es todo suceso repentino por causa del trabajo
                        que
                        produzca lesión.</div>
                    <div class="quiz-options-row">
                        <button class="btn-quiz-option true" onclick="answerQ(2, 'V')">Verdadero</button>
                        <button class="btn-quiz-option false" onclick="answerQ(2, 'F')">Falso</button>
                    </div>
                </div>
                <!-- Question 3 -->
                <div class="quiz-card" id="q3">
                    <div class="quiz-question">3. El reporte a la ARL se puede realizar en cualquier momento (meses
                        después).</div>
                    <div class="quiz-options-row">
                        <button class="btn-quiz-option true" onclick="answerQ(3, 'V')">Verdadero</button>
                        <button class="btn-quiz-option false" onclick="answerQ(3, 'F')">Falso</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- SLIDE 14: EVALUACIÓN NIVEL 2 (SELECCIÓN MULTIPLE) -->
        <div class="slide" id="slide-14">
            <h1 class="slide-title">Desafío Final: Nivel 2</h1>
            <p class="slide-description">Selecciona la respuesta correcta.</p>

            <div class="quiz-container" id="quiz-level-2">
                <!-- Question 4 -->
                <div class="quiz-card active" id="q4">
                    <div class="quiz-question">4. El COPASST es:</div>
                    <div class="quiz-options-col">
                        <button class="btn-quiz-option" onclick="answerQ(4, 'A')">Organismo de promoción y vigilancia de
                            SST.</button>
                        <button class="btn-quiz-option" onclick="answerQ(4, 'B')">Encargado de contratación.</button>
                        <button class="btn-quiz-option" onclick="answerQ(4, 'C')">Protector contra riesgos
                            psicosociales.</button>
                    </div>
                </div>
                <!-- Question 5 -->
                <div class="quiz-card" id="q5">
                    <div class="quiz-question">5. Es función del Comité de Convivencia:</div>
                    <div class="quiz-options-col">
                        <button class="btn-quiz-option" onclick="answerQ(5, 'A')">Divulgar quejas a todo el
                            personal.</button>
                        <button class="btn-quiz-option" onclick="answerQ(5, 'B')">Generar discordia.</button>
                        <button class="btn-quiz-option" onclick="answerQ(5, 'C')">Crear espacios de diálogo y mediar
                            conflictos.</button>
                    </div>
                </div>
                <!-- Question 6 -->
                <div class="quiz-card" id="q6">
                    <div class="quiz-question">6. Es obligación de los trabajadores:</div>
                    <div class="quiz-options-col">
                        <button class="btn-quiz-option" onclick="answerQ(6, 'A')">Participar en capacitaciones.</button>
                        <button class="btn-quiz-option" onclick="answerQ(6, 'B')">Cumplir normas de seguridad.</button>
                        <button class="btn-quiz-option" onclick="answerQ(6, 'C')">Cuidar su salud.</button>
                        <button class="btn-quiz-option" onclick="answerQ(6, 'D')">Todas las anteriores.</button>
                    </div>
                </div>
                <!-- Question 7 -->
                <div class="quiz-card" id="q7">
                    <div class="quiz-question">7. ¿Qué es un acto inseguro?</div>
                    <div class="quiz-options-col">
                        <button class="btn-quiz-option" onclick="answerQ(7, 'A')">Ser un héroe.</button>
                        <button class="btn-quiz-option" onclick="answerQ(7, 'B')">Violación de norma/procedimiento por
                            el
                            trabajador.</button>
                        <button class="btn-quiz-option" onclick="answerQ(7, 'C')">Dispositivo de barrera.</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- SLIDE 15: EVALUACIÓN NIVEL 3 (MATCHING) -->
        <div class="slide" id="slide-15">
            <h1 class="slide-title">Desafío Visual</h1>
            <p class="slide-description">Relaciona la situación con el concepto correcto.</p>

            <div class="match-game-container">
                <div id="match-area">
                    <!-- Cards will be generated via JS -->
                </div>
            </div>
            <button class="btn-nav btn-next" id="btn-next-level-3" style="display:none; margin: 20px auto;"
                onclick="nextSlide(15)">Siguiente Nivel</button>
        </div>

        <!-- SLIDE 16: FACTORES DE RIESGO & RESULTADOS -->
        <div class="slide" id="slide-16">
            <h1 class="slide-title">Análisis de Riesgos</h1>
            <p class="slide-description">Selecciona los riesgos a los que estás expuesto en tu cargo.</p>

            <div class="risk-selector" id="risk-selector">
                <div class="risk-tag" onclick="toggleRisk(this)">🖥️ Biomecánico (Postura)</div>
                <div class="risk-tag" onclick="toggleRisk(this)">🦠 Biológico (Virus/Bacterias)</div>
                <div class="risk-tag" onclick="toggleRisk(this)">🤯 Psicosocial (Estrés)</div>
                <div class="risk-tag" onclick="toggleRisk(this)">⚡ Eléctrico</div>
                <div class="risk-tag" onclick="toggleRisk(this)">🚶 Locativo (Caídas)</div>
                <div class="risk-tag" onclick="toggleRisk(this)">🚗 Accidente de Tránsito</div>
                <div class="risk-tag" onclick="toggleRisk(this)">🔊 Físico (Ruido/Iluminación)</div>
            </div>

            <button class="btn-nav btn-next" style="margin-top: 30px;" onclick="calculateFinalScore()">
                🏁 Finalizar Evaluación
            </button>
        </div>

        <!-- SLIDE 17: RESULTADOS -->
        <div class="slide" id="slide-17">
            <div class="results-card" id="results-card">
                <h1 id="score-title">Calculando...</h1>
                <div class="score-circle" id="score-circle">0%</div>
                <p id="score-msg">Mensaje</p>

                <div class="nav-buttons">
                    <button class="btn-nav btn-prev" id="btn-retry" style="display:none; background: #ef4444;"
                        onclick="retryQuiz()">🔄 Reintentar</button>
                    <button class="btn-nav btn-next" id="btn-finish-module" style="display:none; background: #16a34a;"
                        onclick="terminarModulo()">🚀 Ir a Atención Ciudadano</button>
                </div>
            </div>
        </div>
    </div>

    <script src="../js/utils.js"></script>
    <script>
        function terminarModulo() {
            if (typeof notificarTerminoModulo === 'function') {
                notificarTerminoModulo(true, { score: (typeof matchScore !== 'undefined' ? matchScore : 0) + (typeof quizScore !== 'undefined' ? quizScore : 0) });
            } else {
                alert('Módulo de SST Completado. Avanzando a Atención al Ciudadano...');
                window.location.href = 'induccion-atencion-ciudadano.html';
            }
        }

        let currentSlide = 1;
        const totalSlides = 17;
        let quizScore = 0;
        let matchScore = 0;

        const answers = {
            1: 'V', 2: 'V', 3: 'F',
            4: 'A', 5: 'C', 6: 'D', 7: 'B'
        };

        let currentQuizQ = 1;

        function answerQ(qId, val) {
            const btn = event.target;
            const isCorrect = answers[qId] === val;

            if (isCorrect) {
                btn.style.background = '#22c55e';
                btn.style.color = 'white';
                quizScore++;
            } else {
                btn.style.background = '#ef4444';
                btn.style.color = 'white';
            }

            const parent = btn.parentElement;
            const buttons = parent.querySelectorAll('button');
            buttons.forEach(b => b.disabled = true);

            setTimeout(() => {
                if (qId === 3) { nextSlide(13); return; }
                if (qId === 7) { nextSlide(14); return; }

                const nextQ = document.getElementById(`q${qId + 1}`);
                if (nextQ) {
                    document.getElementById(`q${qId}`).classList.remove('active');
                    nextQ.classList.add('active');
                }
            }, 800);
        }

        const matchData = [
            { id: 'm1', text: 'Riesgo Eléctrico', icon: '⚡', match: 'img5' },
            { id: 'm2', text: 'Accidente Grave', icon: '🚑', match: 'img1' },
            { id: 'm3', text: 'Acto Inseguro', icon: '🪜', match: 'img3' },
            { id: 'm4', text: 'Incidente', icon: '⚠️', match: 'img4' },
            { id: 'm5', text: 'Condición Insegura', icon: '🧱', match: 'img6' },
            { id: 'm6', text: 'Enfermedad Laboral', icon: '🦴', match: 'img2' }
        ];

        function initMatchGame() {
            const area = document.getElementById('match-area');
            if (!area) return;
            area.innerHTML = '';
            const images = [
                { id: 'img1', desc: 'Caída de altura', icon: '🤕' },
                { id: 'img2', desc: 'Mala postura', icon: '🪑' },
                { id: 'img3', desc: 'Silla sobre balde', icon: '🪣' },
                { id: 'img4', desc: 'Casi le cae caja', icon: '📦' },
                { id: 'img5', desc: 'Poste eléctrico', icon: '🔌' },
                { id: 'img6', desc: 'Desorden/Piso', icon: '🧹' },
            ];
            images.forEach(img => {
                const div = document.createElement('div');
                div.className = 'match-card';
                div.innerHTML = `<div style="font-size:2rem">${img.icon}</div><div style="font-size:0.8rem">${img.desc}</div>`;
                div.onclick = () => checkMatch(div, img.id);
                area.appendChild(div);
            });
            showNextTerm();
        }

        let currentTermIdx = 0;
        function showNextTerm() {
            if (currentTermIdx >= matchData.length) {
                document.getElementById('btn-next-level-3').style.display = 'block';
                return;
            }
            const term = matchData[currentTermIdx];
            const desc = document.querySelector('#slide-15 .slide-description');
            if (desc) desc.innerHTML = `Encuentra: <strong style="color:#2563eb; font-size:1.2rem;">${term.text}</strong>`;
        }

        function checkMatch(cardElement, imgId) {
            if (cardElement.classList.contains('matched')) return;
            const correctImg = matchData[currentTermIdx].match;
            if (imgId === correctImg) {
                cardElement.classList.add('matched');
                cardElement.style.border = '2px solid #22c55e';
                cardElement.innerHTML += '<div style="color:green">✅</div>';
                matchScore++;
                currentTermIdx++;
                showNextTerm();
            } else {
                cardElement.style.animation = 'shake 0.5s';
                setTimeout(() => cardElement.style.animation = '', 500);
            }
        }

        function toggleRisk(el) { el.classList.toggle('selected'); }

        function calculateFinalScore() {
            const total = 14;
            const q9Points = document.querySelectorAll('.risk-tag.selected').length > 0 ? 1 : 0;
            const finalScore = quizScore + matchScore + q9Points;
            const percentage = Math.round((finalScore / total) * 100);

            nextSlide(16);

            const circle = document.getElementById('score-circle');
            const msg = document.getElementById('score-msg');
            const btnRetry = document.getElementById('btn-retry');
            const btnFinish = document.getElementById('btn-finish-module');

            if (circle) circle.textContent = `${percentage}%`;
            if (msg) {
                if (percentage >= 80) {
                    circle.style.borderColor = '#22c55e';
                    circle.style.color = '#166534';
                    msg.textContent = '¡Excelente! Has aprobado la inducción.';
                    if (btnFinish) btnFinish.style.display = 'block';
                } else {
                    circle.style.borderColor = '#ef4444';
                    circle.style.color = '#991b1b';
                    msg.textContent = 'No has alcanzado el 80%. Debes repasar.';
                    if (btnRetry) btnRetry.style.display = 'block';
                }
            }
        }

        function retryQuiz() { location.reload(); }

        const dotsContainer = document.getElementById('dots-container');
        if (dotsContainer) {
            dotsContainer.innerHTML = '';
            for (let i = 1; i <= totalSlides; i++) {
                const dot = document.createElement('div');
                dot.className = `dot ${i === 1 ? 'active' : ''}`;
                dot.id = `dot-${i}`;
                dotsContainer.appendChild(dot);
            }
        }

        function updateDots() {
            document.querySelectorAll('.dot').forEach(d => d.classList.remove('active'));
            const dot = document.getElementById(`dot-${currentSlide}`);
            if (dot) dot.classList.add('active');
        }

        function nextSlide(current) {
            const currentEl = document.getElementById(`slide-${current}`);
            if (currentEl) currentEl.classList.remove('active');
            currentSlide = current + 1;
            if (currentSlide > totalSlides) currentSlide = totalSlides;
            const nextSlideEl = document.getElementById(`slide-${currentSlide}`);
            if (nextSlideEl) nextSlideEl.classList.add('active');
            if (currentSlide === 15) initMatchGame();
            updateDots();
        }

        function prevSlide(current) {
            const currentEl = document.getElementById(`slide-${current}`);
            if (currentEl) currentEl.classList.remove('active');
            currentSlide = current - 1;
            if (currentSlide < 1) currentSlide = 1;
            const prevSlideEl = document.getElementById(`slide-${currentSlide}`);
            if (prevSlideEl) prevSlideEl.classList.add('active');
            updateDots();
        }

        function showPolicy(policyId, tabElement) {
            document.querySelectorAll('.policy-tab').forEach(t => t.classList.remove('active'));
            tabElement.classList.add('active');
            document.querySelectorAll('.policy-pane').forEach(p => p.classList.remove('active'));
            document.getElementById(`policy-${policyId}`).classList.add('active');
        }

        function revealItem(el, type) {
            if (el.classList.contains('revealed')) return;
            el.classList.add('revealed');
            const demoBox = document.getElementById('demo-box');
            if (!demoBox) return;
            if (type === 'peligro') demoBox.innerHTML = '<div style="color:#f59e0b; display:flex; justify-content:center;"><svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M8 3v18"/><path d="M16 3v18"/><path d="M8 14h8"/><path d="M8 10h8"/><path d="M8 6h8"/><path d="M8 18h8"/></svg></div><div style="margin-top:10px">Fuente: Escalera</div>';
            else if (type === 'exposicion') demoBox.innerHTML = '<div style="font-size:3rem;">🏃‍♂️💨</div> <div style="margin-top:10px">Acto: Bajar corriendo</div>';
            else if (type === 'riesgo') demoBox.innerHTML = '<div style="font-size:3rem; animation: shake 0.5s;">🤕💥</div> <div style="margin-top:10px; color:red; font-weight:bold;">¡Accidente!</div>';
        }

        function switchCommittee(type) {
            document.querySelectorAll('.committee-btn').forEach(b => b.classList.remove('active'));
            const btn = document.getElementById(`btn-${type}`);
            if (btn) btn.classList.add('active');
            document.querySelectorAll('.committee-content').forEach(c => c.classList.remove('active'));
            const content = document.getElementById(`committee-${type}`);
            if (content) content.classList.add('active');
        }

        // Verificar si el usuario llegó al último slide y mostrar botón de siguiente módulo
        function checkSSTComplete() {
            if (currentSlide === totalSlides) {
                showNextSSTButton();
            }
        }

        // Mostrar botón para ir al siguiente módulo
        function showNextSSTButton() {
            if (document.getElementById('btn-go-to-planeacion')) return;

            const lastSlide = document.getElementById(`slide-${totalSlides}`);
            if (lastSlide) {
                const navButtons = lastSlide.querySelector('.nav-buttons');
                if (navButtons) {
                    const btnContainer = document.createElement('button');
                    btnContainer.id = 'btn-go-to-planeacion';
                    btnContainer.className = 'btn-nav btn-next';
                    btnContainer.onclick = finishSSTAndGoToPlaneacion;
                    btnContainer.innerHTML = '<i class="fas fa-arrow-right" style="margin-right: 8px;"></i> Ir a Planeación Estratégica';
                    navButtons.appendChild(btnContainer);
                }
            }
        }

        // Función para finalizar y navegar al siguiente módulo
        async function finishSSTAndGoToPlaneacion() {
            const btn = document.getElementById('btn-go-to-planeacion');
            if (btn) {
                btn.disabled = true;
                btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Guardando...';
            }

            try {
                if (window.SupabaseProgress) {
                    const result = await window.SupabaseProgress.finishModuleAndNavigate(
                        'sst',
                        100,
                        100
                    );

                    console.log('📊 Resultado guardado en Supabase:', result);

                    if (window.parent !== window) {
                        window.parent.postMessage({
                            type: 'MODULO_INDUCCION_COMPLETADO',
                            data: {
                                moduleId: 'sst',
                                moduleName: 'sst',
                                aprobado: true,
                                fecha: new Date().toISOString()
                            }
                        }, '*');
                    }

                    setTimeout(() => {
                        if (result.nextModule) {
                            window.location.href = result.nextModule.url;
                        } else {
                            window.location.href = '../funcionario/dashboard.html';
                        }
                    }, 500);
                } else {
                    console.warn('⚠️ SupabaseProgress no disponible');
                    window.location.href = 'induccion-planeacion.html';
                }
            } catch (error) {
                console.error('Error al guardar progreso:', error);
                alert('Ocurrió un error al guardar tu progreso.');
                if (btn) {
                    btn.disabled = false;
                    btn.innerHTML = '<i class="fas fa-arrow-right" style="margin-right: 8px;"></i> Ir a Planeación Estratégica';
                }
            }
        }

        // Override nextSlide para verificar completación
        const originalNextSlide = nextSlide;
        nextSlide = function (current) {
            originalNextSlide(current);
            checkSSTComplete();
        };
    </script>

    <!-- Supabase Config -->
    <script src="../js/config.js"></script>
    <!-- Sistema de Progreso con Supabase -->
    <script src="../js/progress.js"></script>

    <!-- Inicializar Supabase y validar acceso al cargar -->
    <script>
        document.addEventListener('DOMContentLoaded', async function () {
            // Inicializar cliente
            if (typeof inicializarSupabase === 'function') {
                inicializarSupabase();
                console.log('✅ Supabase inicializado para SST');
            }

            if (window.SupabaseProgress) {
                try {
                    // 1. Validar acceso (Async)
                    const accessResult = await window.SupabaseProgress.canAccessModule('sst');

                    if (!accessResult.allowed) {
                        console.warn('Acceso denegado:', accessResult.message);
                        alert(accessResult.message);
                        window.location.href = accessResult.redirectTo || '../funcionario/dashboard.html';
                        return;
                    }

                    // 2. Verificar progreso (Async)
                    const progress = await window.SupabaseProgress.getModuleProgress('sst');

                    // Solo notificar si ya está aprobado
                    if (progress && progress.status === 'approved') {
                        console.log('Módulo SST ya completado. Modo repaso activo.');
                    }

                    // 3. Iniciar módulo (Async)
                    await window.SupabaseProgress.startModule('sst');
                    console.log('🚀 Módulo SST iniciado en Supabase');

                } catch (error) {
                    console.error('Error inicializando SST con Supabase:', error);
                }
            }
        });
    </script>
    <!DOCTYPE html>
    <html lang="es">

    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Inducción SST</title>

        <!-- Estilos básicos -->
        <style>
            body {
                font-family: Arial, sans-serif;
                margin: 0;
                padding: 0;
                background: #f5f7fa;
            }

            .container {
                max-width: 900px;
                margin: auto;
                padding: 20px;
                background: white;
                min-height: 100vh;
            }

            h1 {
                text-align: center;
            }

            .btn {
                background: #2563eb;
                color: white;
                border: none;
                padding: 12px 20px;
                border-radius: 8px;
                cursor: pointer;
                font-size: 16px;
                margin-top: 20px;
            }

            .btn:disabled {
                background: gray;
                cursor: not-allowed;
            }

            .hidden {
                display: none;
            }
        </style>
    </head>

    <!-- SUPABASE CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <!-- Cliente Supabase Centralizado -->
    <script src="../js/supabaseClient.js"></script>

</body>

</html>